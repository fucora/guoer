# report-designer
web report designer, like youdata and asktempo.com

## 说明
`tmpl`目录是开发使用的源码目录。开发时需要启用`gulpfile.js`中的`watch`任务，该任务会实时的把`tmpl`目录下的文件打包到`src`目录下。

打包工具使用`https://github.com/thx/magix-composer/tree/v1.1`这个分支的代码进行打包，即克隆下代码后，修改`gulpfile.js`中的`let combineTool = require('../magix-composer/index');`指向相应的目录即可

开发完成后，运行`gulpfile.js`中的`dist`命令即可在`dist`目录中生成最终的文件，`dist`目录中的文件会移除调试、`console`等无关代码。
最后再运行`gulpfile.js`中的`cdist`压缩用于生产环境

> gulpfile.js中的`dist`和`cdist`应该合并成一个，拆分是为了方便调试

### 结构
* assets 存放项目使用到的图标、样式等
* designer 是整个设计器的核心文件，如标尺，历史记录、工具栏、剪切板等
* elements　是用于被设计的元素，比如图表、圆、文本等，可以自由添加或删除。其中`desinger.ts`是在设计器中才会用到的文件，如果使用生产后的`json`数据展示，则该文件用不到
* gallery 是设计当中用到的组件，比如数字输入框、颜色选择器等
* i18n 多语言文件夹，目前只放了中文，可以自己添加其它想要的语言
* lib 存放整个设计器基础的文件，目前只有`sea.js`用于模块化管理和`magix.ts`用于区块化页面开发
* panels 设计器的扩展面板，比如属性面板、元素导航面板等
* util 存放通用的一些代码

### 功能
1. 支持点击或拖动元素到设计区域
2. 设计区域支持拉框选中
3. 支持批量选中后的移动、复制、删除、粘贴等，同时支持相应的快捷键。移动支持键盘箭头微调
4. 支持全局概览
5. 支持元素导航，导航支持拖动调整元素的z轴
6. 工具栏支持各种对齐方式，同时支持多元素的分散、均分等功能。支持调整z轴
7. 支持点击标尺添加辅助线，方便自己手动对齐元素

### 输入输出
设计器产出结构化的`JSON`数据，可以点击示例页面中右上角的“保存”查看当前设计器中产出的`JSON`数据。初始化时，如果传入相应的`JSON`数据，可直接在设计器中展示，也可以使用这份数据只做展示。在示例中右上角有一个“展示”页面，可以把设计器中的`JSON`数据复制出来，在“展示”页面中粘贴，即可展示最终页面
